{"code":"!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){s(1),function(){var t=new Error(\"Cannot find module 'bundle.js'\");throw t.code=\"MODULE_NOT_FOUND\",t}()},function(t,e,s){\"use strict\";s.r(e);class i{constructor(t,...e){this.body=e,this.direction=t,this.ateApple=!1}advance(){const t=this.body[0].slice();switch(this.direction){case\"left\":t[0]-=1;break;case\"right\":t[0]+=1;break;case\"down\":t[1]+=1;break;case\"up\":t[1]-=1;break;default:throw\"Invalid Direction\"}this.body.unshift(t),this.ateApple?this.ateApple=!1:this.body.pop()}setDirection(t){let e;switch(this.direction){case\"left\":case\"right\":e=[\"up\",\"down\"];break;case\"down\":case\"up\":e=[\"left\",\"right\"];break;default:throw\"Invalid Direction\"}e.includes(t)&&(this.direction=t)}checkCollision(t,e){let s=!1,i=!1;const[n,...a]=this.body,[o,r]=n;(o<0||o>t-1||(r<0||r>e-1))&&(s=!0);for(let t of a)o===t[0]&&r===t[1]&&(i=!0);return i||s}isEatingApple(t){const e=this.body[0];return e[0]===t.position[0]&&e[1]===t.position[1]}}class n{constructor(t=[10,10]){this.position=t}setNewPosition(t,e){const s=Math.round(Math.random()*(t-1)),i=Math.round(Math.random()*(e-1));this.position=[s,i]}isOnSnake(t){let e=!1;for(let s of t.body)this.position[0]===s[0]&&this.position[1===s[1]]&&(e=!0);return e}}class a{static gameOver(t,e,s){t.save(),t.font=\"bold 60px Urban Jungle\",t.fillStyle=\"#1d741b\",t.textAlign=\"center\",t.textBaseline=\"middle\",t.strokeStyle=\"#8fa01f\",t.lineWidth=5,t.strokeText(\"GAME OVER\",e,s-85),t.fillText(\"GAME OVER\",e,s-85),t.font=\"bold 20px sans-serif\",t.strokeText(\"Appuie sur la touche Espace pour rejouer\",e,s+90),t.fillText(\"Appuie sur la touche Espace pour rejouer\",e,s+90),t.restore()}static drawScore(t,e,s,i){t.save(),t.font=\"bold 80px sans-serif\",t.fillStyle=\"#e8be7a\",t.textAlign=\"center\",t.textBaseline=\"middle\",t.fillText(\"Score : \"+i.toString(),e,s),t.restore()}static drawSnake(t,e,s){t.save(),t.fillStyle=\"#6f522a\";for(let i of s.body)this.drawBlock(t,i,e);t.restore()}static drawBlock(t,e,s){const[i,n]=e;t.fillRect(i*s,n*s,s,s)}static drawApple(t,e,s){const i=e/2,n=s.position[0]*e+i,a=s.position[1]*e+i;t.save(),t.fillStyle=\"#970c10\",t.beginPath(),t.arc(n,a,i,0,2*Math.PI,!0),t.fill(),t.restore()}}class o{constructor(t=900,e=600){this.canvasWidth=t,this.canvasHeight=e,this.blockSize=25,this.canvas=document.createElement(\"canvas\"),this.ctx=this.canvas.getContext(\"2d\"),this.widthInBlocks=this.canvasWidth/this.blockSize,this.heightInBlocks=this.canvasHeight/this.blockSize,this.centreX=this.canvasWidth/2,this.centreY=this.canvasHeight/2,this.delay=100,this.snakee,this.applee,this.score,this.timeout}init(){this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.border=\"30px solid #382a15\",this.canvas.style.margin=\"50px auto\",this.canvas.style.display=\"block\",this.canvas.style.background=\"url(https://static.vecteezy.com/system/resources/previews/000/147/109/non_2x/palmetto-leaves-background-vector.jpg) no-repeat center \",this.canvas.style.backgroundColor=\"#c7914b\",document.body.appendChild(this.canvas),this.launch()}launch(){this.snakee=new i(\"right\",[6,4],[5,4],[4,4],[3,4],[2,4]),this.applee=new n,this.score=0,this.delay=100,clearTimeout(this.timeout),this.refreshCanvas()}refreshCanvas(){if(this.snakee.advance(),this.snakee.checkCollision(this.widthInBlocks,this.heightInBlocks))a.gameOver(this.ctx,this.centreX,this.centreY);else{if(this.snakee.isEatingApple(this.applee)){this.score++,this.snakee.ateApple=!0;do{this.applee.setNewPosition(this.widthInBlocks,this.heightInBlocks)}while(this.applee.isOnSnake(this.snakee));this.score%5==0&&this.speedUp()}this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),a.drawScore(this.ctx,this.centreX,this.centreY,this.score),a.drawSnake(this.ctx,this.blockSize,this.snakee),a.drawApple(this.ctx,this.blockSize,this.applee),this.timeout=setTimeout(this.refreshCanvas.bind(this),this.delay)}}speedUp(){this.delay/=2}}window.onload=()=>{document.onkeydown=e=>{let s;switch(e.keyCode){case 37:s=\"left\";break;case 38:s=\"up\";break;case 39:s=\"right\";break;case 40:s=\"down\";break;case 32:return void t.launch();default:return}t.snakee.setDirection(s)};let t=new o;t.init()}}]);","extractedComments":[]}